<!DOCTYPE html>
<html lang="{{ site.lang or 'pt' }}">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  {# --- Defaults din√¢micos --- #}
  {% set siteUrl = site.url or "https://vardasorte.pt" %}
  {% set pageTitle = title or site.name %}
  {% set pageDesc = description or site.description %}
  {% set pageOgImage = ogImage or site.ogImage or "/images/cover.png" %}
  {% set canonicalUrl = siteUrl + page.url %}
  {% if noindex %}{% set robotsMeta = "noindex,nofollow" %}{% else %}{% set robotsMeta = "index,follow" %}{% endif %}

  <title>{{ pageTitle }}</title>
  <meta name="description" content="{{ pageDesc }}">
  <meta name="keywords" content="{{ keywords or site.keywords }}">
  <meta name="author" content="{{ author or site.author }}">
  <link rel="canonical" href="{{ canonicalUrl }}">
  <meta name="robots" content="{{ robotsMeta }}">

  <!-- Open Graph -->
  <meta property="og:title" content="{{ pageTitle }}">
  <meta property="og:description" content="{{ pageDesc }}">
  <meta property="og:type" content="{{ ogType or 'website' }}">
  <meta property="og:url" content="{{ canonicalUrl }}">
  <meta property="og:image" content="{{ pageOgImage }}">
  <meta property="og:locale" content="{{ site.lang or 'pt_PT' }}">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{{ pageTitle }}">
  <meta name="twitter:description" content="{{ pageDesc }}">
  <meta name="twitter:image" content="{{ pageOgImage }}">
  <meta name="twitter:site" content="{{ site.twitter }}">

  <link rel="stylesheet" href="/style.css" />
  <link rel="icon" href="/images/favicon.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet" />

  <style>
    #cookie-banner {
      display: none;
      position: fixed;
      bottom: 0;
      width: 100%;
      background: #2d9c6a;
      color: #fff;
      text-align: center;
      padding: 15px;
      font-size: 0.95rem;
      z-index: 9999;
      opacity: 1;
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    #cookie-banner.hidden {
      opacity: 0;
      transform: translateY(100%);
    }
    #cookie-banner button {
      background: #fff;
      color: #2d9c6a;
      border: none;
      border-radius: 5px;
      padding: 6px 12px;
      font-weight: bold;
      margin-left: 10px;
      cursor: pointer;
    }
  </style>
</head>

<body data-theme="light">

  <!-- Cookie Banner -->
  <div id="cookie-banner">
    Este site usa cookies para an√°lise e experi√™ncia personalizada.
    <button onclick="acceptCookies()">Aceitar Cookies</button>
  </div>

  <header>
    <li><a href="/"><h1>‚öΩüçÄ VAR da Sorte</h1></a></li>
    <nav>
      <ul>
        <li><a href="/">In√≠cio</a></li>
        <li><a href="/aposta/">Apostas Di√°rias</a></li>
        <li><a href="/desafio/">Desafios</a></li>
        <li><a href="/ebook/">A Solu√ß√£o!</a></li>
        <li><a href="/sobre/">Sobre</a></li>
        <li><a href="/contacto/">Contacto</a></li>

        <body data-theme="light">

        <button id="themeToggle" class="theme-toggle">üåô Dark</button>

        <script>
          const btn = document.getElementById("themeToggle");
          const body = document.body;

          btn.addEventListener("click", () => {
            const currentTheme = body.getAttribute("data-theme");
            const newTheme = currentTheme === "dark" ? "light" : "dark";
            body.setAttribute("data-theme", newTheme);
            btn.textContent = newTheme === "dark" ? "‚òÄÔ∏è Light" : "üåô Dark";
          });
        </script>
      </ul>
    </nav>
  </header>

  <main>
    {{ content | safe }}
  </main>

  <footer>
    <p>&copy; VAR da Sorte. Todos os direitos reservados üçÄ</p>
    <nav>
      <a href="/sobre/">Sobre</a> |
      <a href="/contacto/">Contacto</a> |
      <a href="/privacidade/">Pol√≠tica & Termos</a>
    </nav>
    <p style="color:#d4af37; font-weight:bold; margin-top:1rem;">
      ‚ö†Ô∏è Jogue de forma respons√°vel. Este site √© apenas informativo e educativo, n√£o oferece garantias de ganhos.
    </p>
    <p style="font-weight:bold;">
      Se conhecer algu√©m com problemas de jogo, procure ajuda profissional.
    </p>
  </footer>

<!-- Scripts -->
<script>
  // Cookie Consent + Google Analytics + Google AdSense
  const banner = document.getElementById('cookie-banner');
  const accepted = localStorage.getItem('cookiesAccepted');

  if (!accepted) {
    banner.style.display = 'block';
  } else {
    loadGA();
    loadAds();
  }

  function acceptCookies() {
    localStorage.setItem('cookiesAccepted', 'true');
    banner.classList.add('hidden');
    setTimeout(() => banner.style.display = 'none', 600);
    loadGA();
    loadAds(); // Carrega AdSense ap√≥s consentimento
  }

  function loadGA() {
    const script1 = document.createElement('script');
    script1.async = true;
    script1.src = 'https://www.googletagmanager.com/gtag/js?id=G-GHXVBE4BMW';
    document.head.appendChild(script1);

    const script2 = document.createElement('script');
    script2.innerHTML = `
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-GHXVBE4BMW');
    `;
    document.head.appendChild(script2);
  }

  function loadAds() {
    const adScript = document.createElement('script');
    adScript.async = true;
    adScript.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2274264207496685";
    adScript.crossOrigin = "anonymous";
    document.head.appendChild(adScript);
  }
</script>

  </script>
</body>
</html>
